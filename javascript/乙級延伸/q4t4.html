<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="q3t8.css">
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js'></script>
  <style>
    a{
      display: block;
      padding: 25px;
      text-decoration: none;
      background: #f4c591;
      margin: 10px auto;
      color: #3f2e0c;
      width: 200px;
      text-align: center;
    }
    .son{
      background: #ebd0b1;
    }
  </style>
</head>

<body>
  <div class="menu">
    <!-- <a href="#">全部商品</a>
    <a href="#" id="fa1" class="fa">111111(3)</a>
    <a href="#" class="fa1 son">1A(3)</a>
    <a href="#" class="fa1 son">1B(0)</a>
    <a href="#" id="fa2" class="fa">222222(3)</a>
    <a href="#" class="fa2 son">2A(3)</a>
    <a href="#" class="fa2 son">2B(0)</a>
    <a href="#" id="fa3" class="fa">333333(3)</a>
    <a href="#" class="fa3 son">3A(3)</a>
    <a href="#" class="fa3 son">3B(0)</a>
    <a href="#" id="fa4" class="fa">444444(3)</a>
    <a href="#" class="fa4 son">4A(3)</a>
    <a href="#" class="fa4 son">4B(0)</a> -->
    
  </div>

  <script>
    $.getJSON("data.json",function (re){
      todo(re.q4t4);
    })
    function todo(myjson){
      let total=0;
      // console.log(myjson);
      for(const fa of myjson){
        let sonCode="",faNum=0;
        for(const son of fa.sub){
          sonCode+=`<a href="#" class="fa${fa.id} son">${son.title}(${son.count})</a>`;
          faNum+=son.count;
          total+=son.count;
        }
        const faCode=` <a href="#" id="fa${fa.id}" class="fa">${fa.title}(${faNum})</a>`
        $(".menu").append(faCode+sonCode);
      }

      $(".menu").prepend(`<a href="#">全部商品(${total})</a>`)

      // effect
      $(".son").hide();
      $(".fa").mouseover(function(){
        const faid=this.id;
        $(".son").not("."+faid).slideUp("fast"); //只針對不是目標的隱藏
        $("."+faid).slideDown("fast");
      })
    }

  </script>
</body>

</html>